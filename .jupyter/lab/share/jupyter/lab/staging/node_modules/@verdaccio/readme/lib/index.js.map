{"version":3,"file":"index.js","names":["DOMPurify","createDOMPurify","JSDOM","window","marked","require","parseReadme","readme","options","result","sanitize","trim","pathname","replace"],"sources":["../src/index.ts"],"sourcesContent":["import createDOMPurify from 'dompurify';\nimport { JSDOM } from 'jsdom';\n\nconst DOMPurify = createDOMPurify(new JSDOM('').window);\nconst { marked } = require('marked');\n\nexport default function parseReadme(\n  readme: string,\n  options: { pathname?: string | void } = {}\n): string | void {\n  let result;\n\n  if (readme) {\n    result = DOMPurify.sanitize(\n      marked(readme, {\n        sanitize: false,\n      }).trim()\n    );\n\n    if ('string' === typeof options.pathname) {\n      result = result.replace(/href=\"#/gi, `href=\"${options.pathname}#`);\n    }\n  }\n\n  return result;\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,SAAS,GAAG,IAAAC,kBAAA,EAAgB,IAAIC,YAAJ,CAAU,EAAV,EAAcC,MAA9B,CAAlB;;AACA,MAAM;EAAEC;AAAF,IAAaC,OAAO,CAAC,QAAD,CAA1B;;AAEe,SAASC,WAAT,CACbC,MADa,EAEbC,OAAqC,GAAG,EAF3B,EAGE;EACf,IAAIC,MAAJ;;EAEA,IAAIF,MAAJ,EAAY;IACVE,MAAM,GAAGT,SAAS,CAACU,QAAV,CACPN,MAAM,CAACG,MAAD,EAAS;MACbG,QAAQ,EAAE;IADG,CAAT,CAAN,CAEGC,IAFH,EADO,CAAT;;IAMA,IAAI,aAAa,OAAOH,OAAO,CAACI,QAAhC,EAA0C;MACxCH,MAAM,GAAGA,MAAM,CAACI,OAAP,CAAe,WAAf,EAA6B,SAAQL,OAAO,CAACI,QAAS,GAAtD,CAAT;IACD;EACF;;EAED,OAAOH,MAAP;AACD"}